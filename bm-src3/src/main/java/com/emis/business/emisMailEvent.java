package com.emis.business;import com.emis.mail.emisMailer;/** *此class 負責把message 寄出 */public class emisMailEvent extends emisEvent{    private emisBusinessResourceBean oResourceBean_;  private String sMailForm_;  private String sMailTo_;  private String sMailSubject_;  private String sMessage_;    public emisMailEvent (emisBusinessResourceBean oResourceBean)  {    super(oResourceBean);    this.oResourceBean_ = oResourceBean;  } /* public void doit ()  {    try    {      //System.out.println("class--------------["+parse2EventHandleTag(this.getClass().getName())+"]");      //System.out.println("mail e------------"+(Element)oResourceBean_.getEmisErrorEvent().getEventElement(parse2EventHandleTag(this.getClass().getName())));      //Hashtable oEventMap = ParseEventElement((Element)oResourceBean_.getEmisErrorEvent().getEventElement(parse2EventHandleTag(this.getClass().getName())));      System.out.println ("<-----------Mail Event-------------------->");      //sMailForm_ = (String)oEventMap.get("From");      //sMailTo_ = (String)oEventMap.get("To");      //sMailSubject_ = getMessage((String)oEventMap.get("SubjectID"));      //sMessage_ = getMessage((String)oEventMap.get("MessageID"));      sMailForm_ = getTagValue ("From");      sMailTo_ = getTagValue ("To");      sMailSubject_ = getIDMessage ("SubjectID");      sMessage_ = getIDMessage ("MessageID");      Thread runner = new Thread (this);      runner.start ();          }catch(Exception e)    {e.printStackTrace ();}  }*/  public void run ()  {        String Message = null;    try    {      //sMailForm_ = (String)oEventMap.get("From");      //sMailTo_ = (String)oEventMap.get("To");      //sMailSubject_ = getMessage((String)oEventMap.get("SubjectID"));      //sMessage_ = getMessage((String)oEventMap.get("MessageID"));      sMailForm_ = getTagValue ("From");      sMailTo_ = getTagValue ("To");      sMailSubject_ = getIDMessage ("SubjectID");      sMessage_ = getIDMessage ("MessageID");      emisMailer m = new emisMailer ();      m.setFrom ("EMIS",sMailForm_);      m.setTo (sMailTo_);      m.setSubject (sMailSubject_);      m.setContent (sMessage_);      m.send (oResourceBean_.getServletContext());    }catch(Exception e)    {      e.printStackTrace ();    }    finally    {    }  }}